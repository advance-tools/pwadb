<table mat-table [dataSource]="dataSource" multiTemplateDataRows>

    <ng-container matColumnDef="position">
        <th mat-header-cell *matHeaderCellDef> # </th>
        <td mat-cell *matCellDef="let element; let i = index;"> {{i}} </td>
    </ng-container>

    <ng-container matColumnDef="name">
      <th mat-header-cell *matHeaderCellDef> Name </th>
      <td mat-cell *matCellDef="let element"> {{element.data.name | titlecase}} </td>
    </ng-container>
  
    <ng-container matColumnDef="phone_code">
      <th mat-header-cell *matHeaderCellDef> Phone Code </th>
      <td mat-cell *matCellDef="let element"> {{element.data.phone_code | titlecase}} </td>
    </ng-container>
  
    <ng-container matColumnDef="code">
      <th mat-header-cell *matHeaderCellDef> Code </th>
      <td mat-cell *matCellDef="let element"> {{element.data.code | titlecase}} </td>
    </ng-container>
  
    <ng-container matColumnDef="my_currency_name">
      <th mat-header-cell *matHeaderCellDef> Currency Name </th>
      <td mat-cell *matCellDef="let element"> {{element.data.my_currency_name | titlecase}} </td>
    </ng-container>

    <ng-container matColumnDef="iso2">
        <th mat-header-cell *matHeaderCellDef> ISO 2 </th>
        <td mat-cell *matCellDef="let element"> {{element.data.iso2}} </td>
    </ng-container>

    <ng-container matColumnDef="iso3">
        <th mat-header-cell *matHeaderCellDef> ISO 3 </th>
        <td mat-cell *matCellDef="let element"> {{element.data.iso3}} </td>
    </ng-container>

    <ng-container matColumnDef="loadMore">

        <td mat-cell *matCellDef="let element" [attr.colspan]="displayedColumns.length">

          <div fxFlex="100%" fxLayoutAlign="center center" *ngIf="{isLoading: tableDatabase.isLoadingChange | async} as changes">

            <button mat-button color="primary" fxFlex="100%" (click)="tableDatabase.loadMore()" *ngIf="!changes.isLoading">Load More</button>

            <mat-spinner *ngIf="changes.isLoading" color="accent" [diameter]="40"></mat-spinner>

          </div>

        </td>

    </ng-container>
  
    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
    <tr mat-row *matRowDef="let row; columns: displayedColumns; when: isObject;"></tr>
    <tr mat-row *matRowDef="let row; columns: ['loadMore']; when: isLoadMore;"></tr>
</table>